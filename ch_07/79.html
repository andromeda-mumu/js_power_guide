<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>es5数组方法</title>
</head>
<body>
<script>
    var data =[1,2,3];
    var sum =0;
    data.forEach(function (value) {
        sum +=value;
    })
    console.log(sum);
    data.forEach(function (v,i,a) {
        a[i]=v+1;
    })
    console.log(data);
    console.log("----------------");
    function foreach(a,f,t) {
        try{
            a.forEach(f,t);
        }catch (e) {
            if(e===foreach.break) return;
            else throw e;
        }
    }
    foreach.break = new Error("StopInteration");
    console.log("----------------");
    var a=[1,2,3];
    b=a.map(function (x) {
        return x*x;
    })
    console.log(b);
    console.log("----------------");
    var a= [1,2,3,4,5,6];
    console.log(a.filter(function (x) {
        return x<4;
    }));
    console.log(a.filter(function (x,i) {
        return i%2==0;
    }));

    a =[1,2,,,4,,5];
    console.log(a.filter(function (x) {
        return true
    }));
    console.log("----------------");
    a=[1,2,3,4,5,6];console.log(a.every(function (x) {
        return x<10;
    }));
    console.log(a.every(function (x) {
        return x%2===0;
    }));
    console.log(a.some(function (x) {
        return x%2===0;
    }));
    console.log(a.some(isNaN));
    console.log("----------------");
    var a=[1,2,3,4];
    console.log(a.reduce(function (x,y) {
        return x+y;
    },1));
    console.log(a.reduce(function (x,y) {
        return x*y;
    },1));
    console.log(a.reduce(function (x,y) {
        return x>y?x:y;
    }));

    console.log("----------------");
    a=[3];
    console.log(a.reduce(function (x,y) {
        return x+y;
    }));
    function extend(o,p) {
        for(prop in p){
            o[prop] =p[prop];
        }
        return o;
    }
    function union(o,p) {
        return extend(extend({},o),p);
    }
    console.log("----------------");
    var object = [{x:1},{y:2},{z:3}];
    var merged =object.reduce(union);
    console.log(merged);
    
    var objects = [{x:1,a:1},{y:2,a:2},{z:3,a:3}];
    console.log(objects.reduce(union));
    console.log(objects.reduceRight(union));
    console.log("----------------");
    function findall(a,x) {
        var results=[],len=a.length,pos=0;
        while(pos<len){
            pos=a.indexOf(x,pos);
            if(pos===-1)break;
            results.push(pos);
            pos=pos+1;
        }
        return results;
    }
    a=[1,3,5,23,5,5];
    console.log(findall(a,5));
</script>
</body>
</html>